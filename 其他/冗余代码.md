# 冗余表达式

如`xxx ? true : false`可以改为`xxx`，还有
if (value > 0.0)
return false;
else
return true;
可以改为`return value > 0.0`

# 冗余条件判断

```cpp
            if (initial_shape_.checkNotFar(particle_position, lattice_spacing_))
            {
                if (initial_shape_.checkContain(particle_position))
```

`checkNotFar`可以删了

`tests\extra_source_and_tests\extra_src\shared\pressure_boundary\bidirectional_buffer.h`：

如果`aligned_box_.checkUpperBound(pos_[index_i], upper_bound_fringe_`满足，那么`!aligned_box_.checkInBounds(pos_[index_i])`一定满足

```cpp
            if (!aligned_box_.checkInBounds(pos_[index_i]))
            {
                if (aligned_box_.checkUpperBound(pos_[index_i], upper_bound_fringe_) &&
                    buffer_indicator_[index_i] == part_id_ &&
                    index_i < particles_->TotalRealParticles())
```

# 冗余变量

可以直接用本类的`spacing_ref_`，不用再额外创建一个`Real`类型的`particle_spacing`。

```cpp
Real SPHAdaptation::computeLatticeNumberDensity(Vec3d zero)
{
    Real sigma(0);
    Real cutoff_radius = kernel_ptr_->CutOffRadius();
    Real particle_spacing = ReferenceSpacing();
	...
}
```

